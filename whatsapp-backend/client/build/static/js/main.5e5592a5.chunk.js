(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{52:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a.n(c),n=a(13),r=a.n(n),i=(a(52),a(29)),j=a(10),b=(a(53),a(16)),d=a.n(b),h=a(25),o=(a(55),a(96)),l=a(97),u=a(98),O=a(99),m=a(100),x=a(101),f=a(105),p=a(104),v=a(39),N=a.n(v).a.create({baseURL:"http://localhost:9000"}),_=a(2),g=function(e){var t=e.messages,a=Object(c.useState)(""),s=Object(j.a)(a,2),n=s[0],r=s[1],i=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N.post("/messages/new",{message:n,name:"Shubhi",received:Math.random()<.5});case 3:r("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:"chat",children:[Object(_.jsxs)("div",{className:"chat_header",children:[Object(_.jsx)(f.a,{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRW6X2lldt_gy2tcbXCKBbKWNVBpH-f1Mcjsw&usqp=CAU",className:"chat_Avatar"}),Object(_.jsxs)("div",{className:"chat_headerInfo",children:[Object(_.jsx)("h3",{children:"Shubhi"}),Object(_.jsxs)("p",{children:["Last seen at ",(new Date).toLocaleString()]})]}),Object(_.jsxs)("div",{className:"chat_headerRight",children:[Object(_.jsx)(p.a,{children:Object(_.jsx)(o.a,{})}),Object(_.jsx)(p.a,{children:Object(_.jsx)(l.a,{})}),Object(_.jsx)(p.a,{children:Object(_.jsx)(u.a,{})})]})]}),Object(_.jsx)("div",{className:"chat_body",children:t.map((function(e){return Object(_.jsxs)("p",{className:"chat_message ".concat(e.received&&"chat_receiver"),children:[Object(_.jsx)("span",{className:"chat_name",children:e.name}),e.message,Object(_.jsx)("span",{className:"chat_timestamp",children:(new Date).toLocaleTimeString()})]})}))}),Object(_.jsxs)("div",{className:"chat__footer",children:[Object(_.jsx)(p.a,{children:Object(_.jsx)(O.a,{})}),Object(_.jsxs)("form",{className:"chat__input",children:[Object(_.jsx)("input",{value:n,placeholder:"Type your message here",type:"text",onChange:function(e){return r(e.target.value)}}),Object(_.jsx)(p.a,{onClick:i,type:"submit",children:Object(_.jsx)(m.a,{})})]}),Object(_.jsx)(p.a,{children:Object(_.jsx)(x.a,{})})]})]})},w=a(102),y=a(103),C=(a(79),a(80),function(e){var t=e.room,a=e.addNewChat;console.log("Inside sidebar chat",t);var s=Object(c.useState)(""),n=Object(j.a)(s,2),r=n[0],i=n[1],b=Object(c.useState)(""),o=Object(j.a)(b,2),l=(o[0],o[1]);Math.random();Object(c.useEffect)((function(){i(Math.floor(5e3*Math.random()))}),[]);var u=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=prompt("Please enter your name"))){e.next=5;break}return l(t),e.next=5,N.post("/chatroom/new",{name:t,message:"Hi"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a?Object(_.jsx)("div",{className:"sidebar_chats",onClick:u,children:Object(_.jsx)("h2",{children:"Add New Chat"})}):Object(_.jsxs)("div",{className:"sidebar_chats",children:[Object(_.jsx)(f.a,{src:"https://avatars.dicebear.com/api/human/".concat(r,".svg"),className:"sidebar__Avatar"}),Object(_.jsxs)("div",{className:"sidebar_chatInfo",children:[Object(_.jsx)("h2",{children:t.name}),Object(_.jsx)("p",{children:t.message})]})]})}),S=function(e){var t=e.rooms;return Object(_.jsxs)("div",{className:"sidebar",children:[Object(_.jsxs)("div",{className:"sidebar_header",children:[Object(_.jsx)(f.a,{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRW6X2lldt_gy2tcbXCKBbKWNVBpH-f1Mcjsw&usqp=CAU",className:"sidebar_avatar",id:"sidebarAvatar"}),Object(_.jsxs)("div",{className:"sidebar_headerRight",children:[Object(_.jsx)(p.a,{children:Object(_.jsx)(w.a,{})}),Object(_.jsx)(p.a,{children:Object(_.jsx)(y.a,{})}),Object(_.jsx)(p.a,{children:Object(_.jsx)(u.a,{})})]}),Object(_.jsx)("div",{className:"sidebar_headerLeft"})]}),Object(_.jsx)("div",{className:"sidebar_search",children:Object(_.jsxs)("div",{className:"sidebar_searchContainer",children:[Object(_.jsx)(o.a,{}),Object(_.jsx)("input",{type:"text",placeholder:"Type your message here.."})]})}),Object(_.jsxs)("div",{className:"sidebar_chat",children:[Object(_.jsx)(C,{addNewChat:!0}),t.map((function(e,t){return Object(_.jsx)(C,{room:e},t)}))]})]})},A=a(28),k=a.n(A);var M=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)([]),r=Object(j.a)(n,2),b=r[0],d=r[1];return Object(c.useEffect)((function(){N.get("/messages/sync").then((function(e){s(e.data)}))}),[]),Object(c.useEffect)((function(){N.get("/chatroom/all").then((function(e){d(e.data)}))}),[]),Object(c.useEffect)((function(){var e=new k.a("f78449ff8f836718a72a",{cluster:"ap2"}).subscribe("messages");return e.bind("inserted",(function(e){s([].concat(Object(i.a)(a),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[a]),Object(c.useEffect)((function(){var e=new k.a("f78449ff8f836718a72a",{cluster:"ap2"}).subscribe("chatrooms");return e.bind("inserted",(function(e){console.log("Inside Chat channel:",e),d([e].concat(Object(i.a)(b)))})),function(){e.unbind_all(),e.unsubscribe()}}),[b]),Object(_.jsx)("div",{className:"app",children:Object(_.jsxs)("div",{className:"app__body",children:[Object(_.jsx)(S,{rooms:b}),Object(_.jsx)(g,{messages:a})]})})};r.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(M,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.5e5592a5.chunk.js.map