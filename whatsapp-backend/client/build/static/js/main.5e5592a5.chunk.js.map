{"version":3,"sources":["axios.js","components/chat/Chat.js","components/sidebarChat/SidebarChat.js","components/sidebar/Sidebar.js","App.js","index.js"],"names":["instance","axios","create","baseURL","Chat","messages","useState","input","setInput","sendMessage","e","a","preventDefault","post","message","name","received","Math","random","className","Avatar","src","Date","toLocaleString","IconButton","SearchOutlined","AttachFile","MoreVert","map","toLocaleTimeString","InsertEmoticon","value","placeholder","type","onChange","target","onClick","Send","Mic","SidebarChat","room","addNewChat","console","log","seed","setSeed","setRoomName","useEffect","floor","createChat","roomName","prompt","Sidebar","rooms","id","DonutLarge","i","App","setMessages","setRooms","get","then","response","data","channel","Pusher","cluster","subscribe","bind","unbind_all","unsubscribe","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5e5592a5.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst instance=axios.create({\r\n    baseURL:'http://localhost:9000'\r\n});\r\n\r\nexport default instance;","import './chat.css'\r\nimport React ,{useState} from 'react'\r\nimport {MoreVert, SearchOutlined,AttachFile, InsertEmoticon, Mic, Send} from '@material-ui/icons'\r\nimport { Avatar, IconButton } from '@material-ui/core';\r\nimport axios from '../../axios'\r\n\r\nconst Chat = ({messages}) => {\r\n   const [input,setInput]=useState(\"\");\r\n   const sendMessage=async (e)=>{\r\n       e.preventDefault();\r\n     await  axios.post('/messages/new',{\r\n           message:input,\r\n           name:\"Shubhi\",\r\n           received:Math.random() < 0.5\r\n       });\r\n       setInput(\"\");\r\n   }\r\n\r\n\r\n    return (\r\n        <div className='chat'>\r\n            <div className='chat_header'>\r\n                <Avatar src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRW6X2lldt_gy2tcbXCKBbKWNVBpH-f1Mcjsw&usqp=CAU' className='chat_Avatar'/>\r\n                <div className='chat_headerInfo'>\r\n                   <h3>Shubhi</h3>\r\n                   <p>Last seen at {(new Date()).toLocaleString()}</p>\r\n                </div>\r\n                <div className='chat_headerRight'>\r\n                <IconButton >\r\n                   <SearchOutlined />\r\n               </IconButton>\r\n               <IconButton >\r\n                   <AttachFile />\r\n               </IconButton>\r\n               <IconButton >\r\n                   <MoreVert />\r\n                   </IconButton> \r\n                </div>\r\n            </div>\r\n            <div className='chat_body'>\r\n                {\r\n                    messages.map((message)=>(\r\n                        <p className={`chat_message ${message.received && \"chat_receiver\"}`}>\r\n                        <span className='chat_name'>{message.name}</span>\r\n                        {message.message}\r\n                        <span className='chat_timestamp'>{new Date().toLocaleTimeString()}</span>\r\n                    </p>\r\n                    ))\r\n                }\r\n\r\n        </div>\r\n            <div className='chat__footer'>\r\n                <IconButton>\r\n                <InsertEmoticon />\r\n                </IconButton>        \r\n           <form className='chat__input'>\r\n               <input value={input} placeholder='Type your message here' type='text' onChange={e=>setInput(e.target.value)}/>          \r\n           {/* <button onClick={handleInput} type='submit'>\r\n                    Send\r\n           </button> */}\r\n           <IconButton onClick={sendMessage} type='submit'>\r\n              <Send />\r\n           </IconButton>\r\n           </form>\r\n           <IconButton >\r\n              <Mic />\r\n           </IconButton>\r\n          \r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import { Avatar } from '@material-ui/core'\r\nimport React,{useState,useEffect} from 'react'\r\nimport './SidebarChat.css';\r\nimport axios from '../../axios';\r\nexport const SidebarChat = ({room,addNewChat}) => {\r\n    console.log(\"Inside sidebar chat\",room)\r\n    const [seed,setSeed]=useState('');\r\n    const[roomName,setRoomName]=useState('');\r\n    const number=Math.random();\r\n    useEffect(()=>{\r\n       setSeed(Math.floor((Math.random() * 5000)));\r\n    },[])\r\n\r\n    const createChat=async ()=>{\r\nconst roomName=prompt(\"Please enter your name\");\r\nif(roomName)\r\n{ setRoomName(roomName);\r\n   await axios.post('/chatroom/new',{\r\n        name:roomName,\r\n        message:\"Hi\"\r\n    })\r\n}\r\n\r\n    }\r\n    return (\r\n        !addNewChat?(\r\n         <div className='sidebar_chats'>\r\n           <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} className='sidebar__Avatar'/>\r\n           <div className='sidebar_chatInfo'>\r\n               <h2>{room.name}</h2>\r\n               <p>{room.message}</p>\r\n           </div>\r\n        </div>\r\n        ):(\r\n            <div className='sidebar_chats' onClick={createChat}>\r\n                <h2>Add New Chat</h2>\r\n            </div>\r\n        )\r\n    \r\n\r\n    )\r\n}\r\n","import React from 'react';\r\nimport {Chat, DonutLarge, MoreVert, SearchOutlined} from '@material-ui/icons'\r\nimport { Avatar, IconButton } from '@material-ui/core';\r\nimport './sidebar.css'\r\nimport { SidebarChat } from '../sidebarChat/SidebarChat';\r\n\r\nconst Sidebar = ({rooms}) => {\r\n\r\n    return (\r\n        <div className='sidebar'>\r\n            <div className='sidebar_header'>\r\n                <Avatar src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRW6X2lldt_gy2tcbXCKBbKWNVBpH-f1Mcjsw&usqp=CAU' className='sidebar_avatar' id=\"sidebarAvatar\"\r\n                />\r\n               <div className='sidebar_headerRight'>\r\n               <IconButton >\r\n                   <DonutLarge />\r\n               </IconButton>\r\n               <IconButton >\r\n                   <Chat />\r\n               </IconButton>\r\n               <IconButton >\r\n                   <MoreVert />\r\n               </IconButton>\r\n               </div>\r\n               <div className='sidebar_headerLeft'>\r\n               </div>\r\n            </div>        \r\n            <div className='sidebar_search'>\r\n                <div className='sidebar_searchContainer'>\r\n                    <SearchOutlined />\r\n                    <input type='text' placeholder='Type your message here..'/>\r\n                </div>\r\n\r\n            </div>\r\n           <div className='sidebar_chat'>\r\n               <SidebarChat addNewChat />\r\n               {rooms.map((room,i)=>(\r\n                   <SidebarChat room={room} key={i} />\r\n               ))}\r\n               \r\n           </div>\r\n       \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","\nimport './App.css';\nimport Chat from './components/chat/Chat';\nimport Sidebar from './components/sidebar/Sidebar';\nimport {useEffect,useState} from 'react'\nimport Pusher from 'pusher-js';\nimport axios from './axios'\nfunction App() {\n\n  const [messages,setMessages]=useState([]);\n  const [rooms,setRooms]=useState([]);\n  useEffect(()=>{\n  axios.get('/messages/sync').then(response=>{\n    setMessages(response.data);\n  })\n  },[])\n\n  useEffect(()=>{\n    axios.get('/chatroom/all').then(response=>{\n      setRooms(response.data);\n    })\n    },[])\n\n  useEffect(()=>{\n    var pusher = new Pusher('f78449ff8f836718a72a', {\n      cluster: 'ap2'\n    });\n  \n    var channel = pusher.subscribe('messages');\n    channel.bind('inserted', function(data) {\n       setMessages([...messages,data]);\n    });\nreturn()=>{\n  channel.unbind_all();\n  channel.unsubscribe();\n}\n\n  },[messages])\n\n  \nuseEffect(()=>{\n  var pusher = new Pusher('f78449ff8f836718a72a', {\n    cluster: 'ap2'\n  });\n\n  var channel = pusher.subscribe('chatrooms');\n  channel.bind('inserted', function(data) {\n    console.log(\"Inside Chat channel:\",data)\n     setRooms([data,...rooms]);\n  });\nreturn()=>{\n  channel.unbind_all();\n  channel.unsubscribe();\n}},[rooms]);\n\n\n  return (\n    <div className=\"app\">\n     <div className=\"app__body\">\n       <Sidebar rooms={rooms} />\n       <Chat messages={messages}  />\n     </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}